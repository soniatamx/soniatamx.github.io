(function(a){jQuery.shake=function(o){var c=jQuery.extend({},jQuery.shake.defaults,o);if(c.debug!==""){var d=a(c.debug);d.append('x: <span id="x">0</span><br>');d.append('y: <span id="y">0</span><br>');d.append('z: <span id="z">0</span><br><br>');d.append('shake: <span id="shake">0</span><br>');d.append('shakeaccum: <span id="shakeaccum"></span><br>');d.append('debug: <span id="console"></span><br>')}var b=0;var n=0;var m=0;var e=0;var k=0;var f=0;var g=0;var j=0;var l=new Date();var i=new Date();var h=false;if(window.DeviceMotionEvent===undefined){if(c.supported!==""){a(c.supported).html("Your browser does not support Device Orientation and Motion API. Try it on an iPhone, iPod or iPad with iOS 4.2+.")}}else{window.ondevicemotion=function(r){var s=r.accelerationIncludingGravity;b=s.x;n=s.y;m=s.y;e=b-((b*c.hf)+(e*(1-c.hf)));k=n-((n*c.hf)+(k*(1-c.hf)));f=m-((m*c.hf)+(f*(1-c.hf)));var t=false;var q=false;if(t){return}t=true;if(Math.abs(b-2*e)>c.violence*1.5||Math.abs(n-2*k)>c.violence*2||Math.abs(m-2*f)>c.violence*3&&h===false){j+=1}l=new Date();var p=l.getTime()-i.getTime();a("#console").html(p);if(h){if(p>=c.debounce){h=false}else{h=true}j=0}if(j>=c.shakethreshold&&h===false){g+=1;a("#shake").html(g);i=l;h=true;c.callback.call()}t=true}}if(c.debug!==""){setInterval(function(){a("#x").html(Math.abs(b-2*e).toFixed(1));a("#y").html(Math.abs(n-2*k).toFixed(1));a("#z").html(Math.abs(m-2*f).toFixed(1));a("#shakeaccum").html(j)},10)}}})(jQuery);jQuery.shake.defaults={debug:"",supported:"",violence:3,hf:0.2,shakethreshold:5,debounce:1000,callback:function(){}};